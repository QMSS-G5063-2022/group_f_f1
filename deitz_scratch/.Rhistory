library(dplyr)
library(stringr)
library(ggplot2)
library(magrittr)
drivers <- read.csv("../raw_data/drivers.csv")
qps <- read.csv("../raw_data/qualifying.csv")
pitstops <- read.csv("../raw_data/pit_stops.csv")
standings <- read.csv("../raw_data/driver_standings.csv")
races <- read.csv("../raw_data/races.csv")
race_standings <- left_join(standings, races, by="raceId")
driver_race_standings <- left_join(race_standings, drivers, by="driverId")
races2021 <- driver_race_standings %>% filter(year==2021)
races2019 <- driver_race_standings %>% filter(year==2019)
ggplot(races2021, aes(x=date,y=position,group=driverRef, color=driverRef)) + geom_line() + coord_flip() + ggtitle("2021")
ggplot(races2019, aes(x=date,y=position,group=driverRef, color=driverRef)) + geom_line() + coord_flip() + ggtitle("2019")
ggplot(races2021, aes(x=date,y=points,group=driverRef,color=driverRef)) + geom_point() + geom_smooth(se=FALSE) + coord_flip() + ggtitle("2021")
ggplot(races2019, aes(x=date,y=points,group=driverRef,color=driverRef)) + geom_point() + geom_smooth(se=FALSE) + coord_flip() + ggtitle("2019")
pt_drivers <- left_join(pitstops, drivers, by="driverId")
pt_driver_races <- left_join(pt_drivers, races, by="raceId")
pt_2021 <- pt_driver_races %>% filter(year==2021)
pt_2019 <- pt_driver_races %>% filter(year==2019)
pt-2019
pt_2019
pt_2021 %>% group_by(driverRef,stop,date) %>% summarise(avg_pt = mean(milliseconds)) %>% arrange(driverRef,avg_pt,date)
pt_2021 %>% group_by(driverRef,stop,date) %>% summarise(avg_pt = mean(milliseconds)) %>% arrange(driverRef,date)
ggplot(pt_2021,aes(x=date,y=stop,facet_grid(driverRef))) + geom_line()
ggplot(pt_2021,aes(x=date,y=stop)) + geom_line() + facet_grid(driverRef)
pt_2021_gg <- pt_2021 %>% group_by(driverRef,stop,date) %>% summarise(avg_pt = mean(milliseconds)) %>% arrange(driverRef,date)
ggplot(pt_2021_gg,aes(x=date,y=stop)) + geom_line() + facet_grid(driverRef)
pt_2021_gg
pt_2021 %>% group_by(driverRef,stop,date)
pt_2021 %>% select(driverRef,stop,date) %>% arrange(driverRef,date)
pt_2021 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date)
pt_2021_gg <- pt_2021 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date)
ggplot(pt_2021_gg,aes(x=date,y=avg_pt,color=stop)) + geom_line() + facet_grid(driverRef)
ggplot(pt_2021_gg,aes(x=date,y=avg_pt,color=stop)) + geom_line() + facet_grid(.~driverRef)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,color=stop)) + geom_line() + facet_grid(.~driverRef)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,color=stop)) + geom_line() + facet_grid(driverRef~.driverRef)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,color=stop)) + geom_line() + facet_grid(driverRef~.)
pt_2021 %>% group_by(stop,date) %>% summarise(avg_pt=mean(milliseconds)) %>% arrange(date,stop)
ggplot(pt_2021_overall, aes(x=date,y=avg_pt,color=stop)) + geom_line()
pt_2021_overall <- pt_2021 %>% group_by(stop,date) %>% summarise(avg_pt=mean(milliseconds)) %>% arrange(date,stop)
pt_2021_overall <- pt_2021 %>% group_by(stop,date) %>% summarise(avg_pt=mean(milliseconds)) %>% arrange(date,stop)
ggplot(pt_2021_overall, aes(x=date,y=avg_pt,color=stop)) + geom_line()
ggplot(pt_2021_overall, aes(x=date,y=avg_pt,color=stop,group=stop)) + geom_line()
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=stop,color=stop)) + geom_line() + facet_grid(driverRef~.)
pt_drivers <- left_join(pitstops, drivers, by="driverId")
pt_driver_races <- left_join(pt_drivers, races, by="raceId")
pt_2021 <- pt_driver_races %>% filter(year==2021)
pt_2019 <- pt_driver_races %>% filter(year==2019)
pt_2021_gg <- pt_2021 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=stop,color=stop)) + geom_line() + facet_grid(driverRef~.)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=stop,color=stop)) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
pt_2021_gg <- pt_2021 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date) %>% filter(stop<5)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=stop,color=stop)) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
pt_2021_gg <- pt_2021 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date) %>% filter(stop<4)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=stop,color=stop)) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=as.factor(stop),color=as.factor(stop))) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
pt_2019_gg <- pt_2019 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date) %>% filter(stop<4)
ggplot(pt_2019_gg,aes(x=date,y=milliseconds,group=as.factor(stop),color=as.factor(stop))) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=as.factor(stop),color=as.factor(stop))) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
```{r, fig.width=10,fig.height=15}
pt_drivers <- left_join(pitstops, drivers, by="driverId")
pt_driver_races <- left_join(pt_drivers, races, by="raceId")
pt_2021 <- pt_driver_races %>% filter(year==2021)
pt_2019 <- pt_driver_races %>% filter(year==2019)
pt_2021_gg <- pt_2021 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date) %>% filter(stop<4)
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=as.factor(stop),color=as.factor(stop))) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
pt_2019_gg <- pt_2019 %>% select(driverRef,stop,date,milliseconds) %>% arrange(driverRef,date) %>% filter(stop<4)
ggplot(pt_2019_gg,aes(x=date,y=milliseconds,group=as.factor(stop),color=as.factor(stop))) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
ggplot(pt_2019_gg,aes(x=date,y=milliseconds,group=as.factor(stop),color=as.factor(stop))) + geom_line() + facet_grid(driverRef~.) + ggtitle("2019")
ggplot(pt_2021_gg,aes(x=date,y=milliseconds,group=as.factor(stop),color=as.factor(stop))) + geom_line() + facet_grid(driverRef~.) + ggtitle("2021")
pt_2021
